{% extends "main/base.html" %}
{% load main_extras %}

{% block nav_ledger %}<span class="sr-only">(current)</span> {% endblock nav_ledger %}

{% block title %}
<h1 class="h2">Hesap Defteri  &ensp;  <span class="h6">Toplam Alacak = {{ total|floatformat }} TL</span>&emsp;&emsp;&emsp;<span class="h4">{{request.path|removefirst:7}}</span></h1>
{% endblock title %}

{% if msg %} <h4>{{msg}}</h4>{% endif %}

{% block extract %}
{% comment %} {% with name="url" %}     
"{% url 'main:ledger_create' %}"
{% endwith %}
{% include 'main/snippets/extract_button.html' with url=url %} {% endcomment %}
<div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group mr-2">
      <a href="{% url 'main:export_csv_ledgers' %}" class="btn btn-sm btn-outline-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="16"
          height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
          <path
            d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
          <path
            d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
        </svg> &ensp;Dışa aktar&emsp;</a>
    </div>
  </div>
{% endblock extract %}

{% block col2 %}
<div class="container">
	<div class="row">
		<div class="col mx-auto">
			<a href="{% url 'main:ledger_create' %}" class="btn btn-secondary" id="newledger"><svg
					xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
					class="bi bi-plus-circle" viewBox="0 0 16 16">
					<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
					<path
						d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
				</svg> Hesap Defteri'ne </br> Yeni Kayit ekle</a>
		</div>
	</div>

	</br>

	<div class="row">
		<div class="col mx-auto">
			<a href="{% url 'main:item_create' %}" class="btn btn-secondary" id="newledger"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
				<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
				<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
			  </svg> Yeni Parça ekle</a>
		</div>
	</div>
</div>
{% endblock col2 %}

{% block content %}

{% comment %} <div class="alert alert-secondary" role="alert">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-3 col-md-3">
				<p class="text-left h6">Toplam Alacak = {{ total|floatformat }} TL</p>
			</div>
			<div class="col-6 col-md-6">
				<p class="text-left font-weight-bold h3">TEKIN OTO HESAP DEFTERI</p>
			</div>
			<div class="col-3 col-md-3">
				<p class="text-right h6"></p>
			</div>
		</div>
	</div>
</div> {% endcomment %}

<div class="container">
	<div class="row mt-4">
		<div class="col-12 mx-auto">
			<table id="example" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
				<thead>
					<tr>
						<th>Ad Soyad</th>
						<th>Toplam Borç</th>
						<th>Son İşlem Tarihi</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>
	
	
	
	
	
	<script>
	
		$('#example').DataTable({
			"processing":true,  
        	"serverSide":true,
			ajax: "{% url 'main:ledger_list_json' %}",
			language:
			{
				"decimal": "",
				"emptyTable": "Henüz bir kayıt oluşturulmamış",
				"info": "Sıralamak için tablo başlıklarına tıkla</br>Düzenlemek için isme tıkla</br>_TOTAL_ kayıt arasından _START_ ile _END_ arasındaki kayıtlar gösteriliyor",
				"infoEmpty": "0 kayıt arasından 0 dan 0 kadar olanı gösteriliyor",
				"infoFiltered": "</br>(toplam _MAX_ kayıt arasından filtrelendi)",
				"infoPostFix": "",
				"thousands": ",",
				searchPlaceholder: "Ad veya soyad gir",
				"lengthMenu": "_MENU_ kayıt göster",
				"loadingRecords": "Yükleniyor...",
				"processing": "İşleniyor...",
				"search": "Ara:",
				"zeroRecords": "Aramanızla eşleşen öge bulunmamaktadır",
				"paginate": {
					"first": "İlk",
					"last": "Son",
					"next": "İleri",
					"previous": "Geri"
				},
				"aria": {
					"sortAscending": ": artan şekilde sıralama",
					"sortDescending": ": azalan şekilde sırala"
				}
			}
			// "columnDefs": [ {
			// 	"targets": 1,
			// 	"data": null,
			// 	"render": function(data,type,row) { return 0}
			// } ]
		});
		$('.dataTables_filter input[type="search"]').css(
			{ 'width': '350px', 'display': 'inline-block' }
		);
		var $a = $('<div class="col-sm-12 col-md-4"><a href="{% url "main:ledger_create" %}" class="btn btn-success btn-sm">&emsp;<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>&ensp;Yeni Kayıt Oluştur&emsp;</a></div>"' );
		$('#example_wrapper').find('.row').eq(0).addClass('d-flex justify-content-between');
		$($('#example_wrapper').find('.row')[0].children[0]).attr('class', 'col-sm-12 col-md-4');
		$($('#example_wrapper').find('.row')[0].children[1]).attr('class', 'col-sm-12 col-md-4');
		$('#example_wrapper').find('.row').eq(0).children().first().after($a);
		// var $elem = $('#example_wrapper').find('.row')[0].children;
		// $("#example_wrapper > row:nth-child(0)").after("<div>great things</div>");
		// // $("#controller > div:nth-child(" + (i) + ")").after("<div>great things</div>");
	
		// $('.dataTables_length').append($a);
	</script>
</div>


</div>



{% endblock content %}