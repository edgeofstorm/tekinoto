{% extends "main/base.html" %}
{% load main_extras %}



{% block title %}
<h1 class="h2">Parça Listesi&emsp;&emsp;&emsp;<span class="h4">{{request.path|removefirst:7}}</span></h1>
{% endblock title %}
{% if msg %} <h4>{{msg}}</h4>{% endif %}
{% block extract %}
<div class="btn-toolbar mb-2 mb-md-0">
	<div class="btn-group mr-2">
		<a href="{% url 'main:export_csv_items' %}" id="#printButton" class="btn btn-sm btn-outline-secondary"><svg xmlns="http://www.w3.org/2000/svg"
				width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
				<path
					d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
				<path
					d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
			</svg> &ensp;Dışa aktar&emsp;</a>
	</div>
</div>
{% endblock extract %}

{% block content %}
<div class="container">
	<div class="row mt-4">
		<div class="col-12 mx-auto">
			<table id="example" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
				<thead>
					<tr>
						<th>Parça İsmi</th>
						<th>Fiyat</th>
						<th>Stok</th>
						<th>Resim</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>



	<script>
		var table = $('#example').DataTable({
			"processing":true,  
        	"serverSide":true,
			ajax: "{% url 'main:item_list_json' %}",
			// buttons: ['pdf'],
			columnDefs: [ { orderable: false, targets: [3] }],
            // order: [[ 4, 'asc' ], [ 8, 'asc' ], [ 7, 'asc' ]],
			language:
			{
				"decimal": "",
				"emptyTable": "Henüz bir kayıt oluşturulmamış",
				"info": "Sıralamak için tablo başlıklarına tıkla</br>Duzenlemek icin parca ismine tikla</br>_TOTAL_ kayıt arasından _START_ ile _END_ arasındaki kayıtlar gösteriliyor",
				"infoEmpty": "0 kayıt arasından 0 dan 0 kadar olanı gösteriliyor",
				"infoFiltered": "</br>(toplam _MAX_ kayıt arasından filtrelendi)",
				"infoPostFix": "",
				"thousands": ",",
				searchPlaceholder: "Parca ismi gir",
				"lengthMenu": "_MENU_ kayıt göster",
				"loadingRecords": "Yükleniyor...",
				"processing": "İşleniyor...",
				"search": "Ara:",
				"zeroRecords": "Aramanızla eşleşen öge bulunmamaktadır",
				"paginate": {
					"first": "İlk",
					"last": "Son",
					"next": "İleri",
					"previous": "Geri"
				},
				"aria": {
					"sortAscending": ": artan şekilde sıralama",
					"sortDescending": ": azalan şekilde sırala"
				}
			},
		});
		var target = $('.d-flex .btn-toolbar .btn-group');
		// table.buttons().container().appendTo(target);
		// $("#printButton").on("click", function () {
		// 	table.button('.buttons-pdf').trigger();
		// });

		$('.dataTables_filter input[type="search"]').css(
			{ 'width': '350px', 'display': 'inline-block' }
		);
		var $a = $('<div class="col-sm-12 col-md-4"><a href="{% url "main:item_create" %}" class="btn btn-success btn-sm">&emsp;<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>&ensp;Parça Ekle&emsp;</a></div>"');
		$('#example_wrapper').find('.row').eq(0).addClass('d-flex justify-content-between');
		$($('#example_wrapper').find('.row')[0].children[0]).attr('class', 'col-sm-12 col-md-4');
		$($('#example_wrapper').find('.row')[0].children[1]).attr('class', 'col-sm-12 col-md-4');
		$('#example_wrapper').find('.row').eq(0).children().first().after($a);
	</script>
</div>

{% endblock content %}